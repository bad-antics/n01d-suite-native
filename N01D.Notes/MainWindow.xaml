<Window x:Class="N01D.Notes.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="N01D Notes" 
        Height="700" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#0D0D0D">
    
    <Window.InputBindings>
        <KeyBinding Key="N" Modifiers="Control" Command="{Binding NewCommand}"/>
        <KeyBinding Key="O" Modifiers="Control" Command="{Binding OpenCommand}"/>
        <KeyBinding Key="S" Modifiers="Control" Command="{Binding SaveCommand}"/>
        <KeyBinding Key="S" Modifiers="Control+Shift" Command="{Binding SaveAsCommand}"/>
        <KeyBinding Key="P" Modifiers="Control" Command="{Binding TogglePreviewCommand}"/>
        <KeyBinding Key="F" Modifiers="Control" Command="{Binding FindCommand}"/>
    </Window.InputBindings>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#1A1A1A" BorderBrush="#00FF41" BorderThickness="0,0,0,2" Padding="10">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="[" Foreground="#00FF41" FontFamily="Consolas" FontSize="18"/>
                    <TextBlock Text=" N01D " Foreground="#0ABDC6" FontFamily="Consolas" FontSize="18" FontWeight="Bold"/>
                    <TextBlock Text="::" Foreground="#FF0055" FontFamily="Consolas" FontSize="18"/>
                    <TextBlock Text=" NOTES " Foreground="#00FF41" FontFamily="Consolas" FontSize="18" FontWeight="Bold"/>
                    <TextBlock Text="]" Foreground="#00FF41" FontFamily="Consolas" FontSize="18"/>
                </StackPanel>
                <TextBlock x:Name="txtFilename" Text="untitled.md" 
                          HorizontalAlignment="Right" VerticalAlignment="Center"
                          Foreground="#808080" FontFamily="Consolas" FontSize="12"/>
            </Grid>
        </Border>

        <!-- Toolbar -->
        <Border Grid.Row="1" Background="#1A1A1A" Padding="5">
            <StackPanel Orientation="Horizontal">
                <Button x:Name="btnNew" Content="[+] New" Click="BtnNew_Click" Margin="2" Style="{StaticResource N01DButton}"/>
                <Button x:Name="btnOpen" Content="[O] Open" Click="BtnOpen_Click" Margin="2" Style="{StaticResource N01DButton}"/>
                <Button x:Name="btnSave" Content="[S] Save" Click="BtnSave_Click" Margin="2" Style="{StaticResource N01DButton}"/>
                <Button x:Name="btnSaveAs" Content="Save As" Click="BtnSaveAs_Click" Margin="2" Style="{StaticResource N01DButton}"/>
                <Rectangle Width="1" Fill="#333333" Margin="10,5"/>
                <Button x:Name="btnBold" Content="B" Click="BtnBold_Click" Margin="2" FontWeight="Bold" Style="{StaticResource N01DButton}" Width="30"/>
                <Button x:Name="btnItalic" Content="I" Click="BtnItalic_Click" Margin="2" FontStyle="Italic" Style="{StaticResource N01DButton}" Width="30"/>
                <Button x:Name="btnCode" Content="&lt;&gt;" Click="BtnCode_Click" Margin="2" Style="{StaticResource N01DButton}" Width="40"/>
                <Button x:Name="btnLink" Content="@" Click="BtnLink_Click" Margin="2" Style="{StaticResource N01DButton}" Width="30"/>
                <Button x:Name="btnList" Content="=" Click="BtnList_Click" Margin="2" Style="{StaticResource N01DButton}" Width="30"/>
                <Rectangle Width="1" Fill="#333333" Margin="10,5"/>
                <Button x:Name="btnTogglePreview" Content="[Preview]" Click="BtnTogglePreview_Click" Margin="2" Style="{StaticResource N01DButton}"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="EditorColumn" Width="*"/>
                <ColumnDefinition x:Name="SplitterColumn" Width="Auto"/>
                <ColumnDefinition x:Name="PreviewColumn" Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Editor -->
            <Border Grid.Column="0" Background="#1A1A1A" BorderBrush="#333333" BorderThickness="1" Margin="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Text="MARKDOWN EDITOR" Foreground="#00FF41" FontFamily="Consolas" FontSize="11" Padding="10,5" Background="#0D0D0D"/>
                    <TextBox x:Name="txtEditor" Grid.Row="1"
                             TextChanged="TxtEditor_TextChanged"
                             AcceptsReturn="True" AcceptsTab="True"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Auto"
                             Background="#0D0D0D"
                             Foreground="#E0E0E0"
                             CaretBrush="#00FF41"
                             SelectionBrush="#00FF41"
                             FontFamily="Consolas"
                             FontSize="14"
                             Padding="10"
                             BorderThickness="0"/>
                </Grid>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1" Width="5" Background="#333333" ResizeBehavior="PreviousAndNext"/>

            <!-- Preview -->
            <Border x:Name="previewBorder" Grid.Column="2" Background="#1A1A1A" BorderBrush="#333333" BorderThickness="1" Margin="5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" Text="LIVE PREVIEW" Foreground="#0ABDC6" FontFamily="Consolas" FontSize="11" Padding="10,5" Background="#0D0D0D"/>
                    <wv2:WebView2 x:Name="webPreview" Grid.Row="1"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="#1A1A1A" Padding="10,5">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Lines: " Foreground="#808080" FontFamily="Consolas" FontSize="11"/>
                    <TextBlock x:Name="txtLines" Text="0" Foreground="#00FF41" FontFamily="Consolas" FontSize="11"/>
                    <TextBlock Text="  |  Words: " Foreground="#808080" FontFamily="Consolas" FontSize="11"/>
                    <TextBlock x:Name="txtWords" Text="0" Foreground="#00FF41" FontFamily="Consolas" FontSize="11"/>
                    <TextBlock Text="  |  Chars: " Foreground="#808080" FontFamily="Consolas" FontSize="11"/>
                    <TextBlock x:Name="txtChars" Text="0" Foreground="#00FF41" FontFamily="Consolas" FontSize="11"/>
                </StackPanel>
                <TextBlock x:Name="txtStatus" Text="Ready" HorizontalAlignment="Right" Foreground="#808080" FontFamily="Consolas" FontSize="11"/>
            </Grid>
        </Border>
    </Grid>
</Window>
